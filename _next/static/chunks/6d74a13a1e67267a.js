(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85485,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(47167);var s=e.i(18566),a=e.i(84981);let l={registration:{label:"ë“±ë¡",redirectPath:()=>"/home",listPath:"/home",emoji:"ðŸŽ«",color:"from-green-500 to-emerald-600"},session:{label:"ì„¸ì…˜",redirectPath:e=>`/sessions/${e}`,listPath:"/sessions",emoji:"ðŸŽ¤",color:"from-purple-500 to-indigo-600"},booth:{label:"ë¶€ìŠ¤",redirectPath:e=>`/booths/${e}`,listPath:"/booths",emoji:"ðŸ¢",color:"from-blue-500 to-cyan-600"},paper:{label:"í¬ìŠ¤í„°",redirectPath:e=>`/papers/${e}`,listPath:"/papers",emoji:"ðŸ“„",color:"from-orange-500 to-amber-600"}};function i(){let e=(0,s.useSearchParams)(),i=(0,a.useAuthStore)(),[n,o]=(0,r.useState)("idle"),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(null),h=e.get("type"),x=e.get("id"),b=(0,r.useRef)(!1),p=async(e,t,r)=>{try{let s=await fetch("https://backend.vibemakers.kr/api/checkin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({targetType:"registration"===e?"session":e,targetId:t})}),a=await s.json();if(s.ok)return{success:!0,message:a.message||"ì²´í¬ì¸ ì™„ë£Œ!"};if(409===s.status)return{success:!0,message:"ì´ë¯¸ ì²´í¬ì¸ ì™„ë£Œëœ ê³³ìž…ë‹ˆë‹¤.",isDuplicate:!0};return{success:!1,message:a.message||"ì²´í¬ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}}catch(e){return console.error("ì²´í¬ì¸ API ì˜¤ë¥˜:",e),{success:!1,message:"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}}},g=async(e,t,r)=>{if(!l[e]){o("error"),d(`ì§€ì›í•˜ì§€ ì•ŠëŠ” ì²´í¬ì¸ íƒ€ìž…ìž…ë‹ˆë‹¤: ${e}`);return}u(e),o("processing");let s=await p(e,t,r);s.success?(o(s.isDuplicate?"duplicate":"success"),d(s.message),setTimeout(()=>{o("redirecting");let r=l[e],s=r.redirectPath(t);history.replaceState(null,"",r.listPath),i.user?.has_signature?window.location.href=s:window.location.href=`/signature?redirect=${encodeURIComponent(s)}`},1500)):(o("error"),d(s.message))};if((0,r.useEffect)(()=>{if(i.isHydrated&&!b.current){if(!h||!x){o("error"),d("ìž˜ëª»ëœ QR ì½”ë“œìž…ë‹ˆë‹¤. (type ë˜ëŠ” id ëˆ„ë½)");return}if(!i.isAuthenticated||!i.token){let e=`/checkin?type=${h}&id=${x}`;window.location.href=`/login?redirect=${encodeURIComponent(e)}`;return}b.current=!0,o("loading"),g(h,x,i.token)}},[i.isHydrated,i.isAuthenticated,h,x]),!i.isHydrated)return(0,t.jsx)("div",{className:"min-h-[100dvh] flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-blue-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"ë¡œë”© ì¤‘..."})]})});let f=m?l[m]:null;return(0,t.jsx)("div",{className:"min-h-[100dvh] flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-blue-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[("idle"===n||"loading"===n||"processing"===n)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-20 h-20 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"ì²´í¬ì¸ ì²˜ë¦¬ ì¤‘..."}),(0,t.jsx)("p",{className:"text-gray-500",children:f?`${f.emoji} ${f.label} ì²´í¬ì¸`:"ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"})]}),"success"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`w-24 h-24 rounded-full bg-gradient-to-br ${f?.color||"from-green-500 to-emerald-600"} flex items-center justify-center mx-auto mb-6 animate-bounce`,children:(0,t.jsx)("span",{className:"text-5xl",children:f?.emoji||"âœ…"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ì²´í¬ì¸ ì™„ë£Œ!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,t.jsxs)("p",{className:"text-sm text-purple-600",children:["ìž ì‹œ í›„ ",f?.label," íŽ˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤..."]})]}),"duplicate"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("span",{className:"text-5xl",children:"ðŸ‘‹"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ì´ë¯¸ ë°©ë¬¸í•˜ì…¨ë„¤ìš”!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:c}),(0,t.jsxs)("p",{className:"text-sm text-purple-600",children:["ìž ì‹œ í›„ ",f?.label," íŽ˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤..."]})]}),"redirecting"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-20 h-20 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"íŽ˜ì´ì§€ ì´ë™ ì¤‘..."})]}),"error"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-red-400 to-rose-500 flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("span",{className:"text-5xl",children:"âŒ"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ì˜¤ë¥˜ ë°œìƒ"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:c}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("button",{onClick:()=>{h&&x&&i.token&&(b.current=!1,o("loading"),g(h,x,i.token))},disabled:!h||!x,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition-colors disabled:opacity-50",children:"ë‹¤ì‹œ ì‹œë„"}),(0,t.jsx)("button",{onClick:()=>window.location.href="/home",className:"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors",children:"í™ˆìœ¼ë¡œ ì´ë™"})]})]}),!1]})})}function n(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-[100dvh] flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-blue-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"ì²´í¬ì¸ ì²˜ë¦¬ ì¤‘..."})]})}),children:(0,t.jsx)(i,{})})}e.s(["default",()=>n],85485)}]);